{"version":3,"sources":["webpack:///./src/components/TagLabels.js","webpack:///./src/components/Panel.js","webpack:///./src/utils/helpers.js","webpack:///./node_modules/core-js/modules/_array-fill.js","webpack:///./node_modules/core-js/modules/es6.array.fill.js","webpack:///./i18n.js","webpack:///./src/components/Signup.js","webpack:///./src/utils/whitelist.js","webpack:///./src/utils/i18n.js","webpack:///./src/templates/blog-post.js"],"names":["TagLabels","tags","className","style","zIndex","map","tag","boxShadow","to","rel","Panel","children","fontSize","border","borderRadius","padding","background","wordBreak","formatReadingTime","minutes","cups","Math","round","Array","E","fill","join","formatPostDate","date","lang","Date","prototype","toLocaleDateString","args","day","month","year","filter","Boolean","toObject","toAbsoluteIndex","toLength","module","exports","value","O","this","length","aLen","arguments","index","undefined","end","endPos","$export","P","supportedLanguages","en","ru","tr","es","ko","sv","it","id","pl","ja","fr","he","hu","vi","th","my","sk","te","uk","bg","cs","de","nl","nb","fa","ar","sr","React","Component","codeToLanguage","code","replace","systemFont","Translations","render","props","translations","languageLink","editUrl","readerTranslations","hasRussianTranslation","indexOf","fontFamily","l","i","Fragment","key","href","target","BlogPostTemplate","post","data","markdownRemark","siteTitle","get","pageContext","previous","next","slug","translatedLinks","fields","langKey","html","matches","match","forEach","url","whitelist","replaceAnchorLinksByLanguage","link","translatedLink","RegExp","slice","sort","a","b","loadFontsForCode","rawSlug","targetLang","createLanguageLink","enSlug","encodeURIComponent","Layout","location","title","maxWidth","SEO","frontmatter","description","spoiler","color","scale","display","marginBottom","rhythm","marginTop","timeToRead","dangerouslySetInnerHTML","__html","margin","flexWrap","justifyContent","listStyle","marginRight","pageQuery"],"mappings":"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","file":"component---src-templates-blog-post-js-99516560231533801336.js","sourcesContent":["import React from 'react';\nimport { Link } from 'gatsby';\n\nconst TagLabels = ({ tags }) => (\n  <div className=\"tags\" style={{ zIndex: 1 }}>\n    {tags.map(tag => (\n      <Link\n        style={{ boxShadow: 'none' }}\n        to={`/tags/${tag}`}\n        rel=\"bookmark\"\n        className=\"tagLabel\"\n      >\n        {tag}\n      </Link>\n    ))}\n  </div>\n);\n\nexport default TagLabels;\n","import React from 'react';\n\nfunction Panel({ children, style = {} }) {\n  return (\n    <p\n      style={{\n        fontSize: '0.9em',\n        border: '1px solid var(--hr)',\n        borderRadius: '0.75em',\n        padding: '0.75em',\n        background: 'var(--inlineCode-bg)',\n        wordBreak: 'keep-all',\n        ...style,\n      }}\n    >\n      {children}\n    </p>\n  );\n}\n\nexport default Panel;\n","export function formatReadingTime(minutes) {\n  let cups = Math.round(minutes / 5);\n  let bowls = 0;\n  if (cups > 5) {\n    return `${new Array(Math.round(cups / Math.E))\n      .fill('üç±')\n      .join('')} ${minutes} min read`;\n  } else {\n    return `${new Array(cups || 1).fill('‚òïÔ∏è').join('')} ${minutes} min read`;\n  }\n}\n\n// `lang` is optional and will default to the current user agent locale\nexport function formatPostDate(date, lang) {\n  if (typeof Date.prototype.toLocaleDateString !== 'function') {\n    return date;\n  }\n\n  date = new Date(date);\n  const args = [\n    lang,\n    { day: 'numeric', month: 'long', year: 'numeric' },\n  ].filter(Boolean);\n  return date.toLocaleDateString(...args);\n}\n","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\n'use strict';\nvar toObject = require('./_to-object');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nvar toLength = require('./_to-length');\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = toLength(O.length);\n  var aLen = arguments.length;\n  var index = toAbsoluteIndex(aLen > 1 ? arguments[1] : undefined, length);\n  var end = aLen > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\nvar $export = require('./_export');\n\n$export($export.P, 'Array', { fill: require('./_array-fill') });\n\nrequire('./_add-to-unscopables')('fill');\n","// Please keep keys lowercase!\nexports.supportedLanguages = {\n  en: 'English',\n  ru: '–†—É—Å—Å–∫–∏–π',\n  tr: 'T√ºrk√ße',\n  es: 'Espa√±ol',\n  ko: 'ÌïúÍµ≠Ïñ¥',\n  sv: 'Svenska',\n  it: 'Italiano',\n  id: 'Bahasa Indonesia',\n  'pt-br': 'Portugu√™s do Brasil',\n  pl: 'Polski',\n  'zh-hant': 'ÁπÅÈ´î‰∏≠Êñá',\n  'zh-hans': 'ÁÆÄ‰Ωì‰∏≠Êñá',\n  ja: 'Êó•Êú¨Ë™û',\n  fr: 'Fran√ßais',\n  he: '◊¢◊ë◊®◊ô◊™',\n  hu: 'Magyar',\n  vi: 'Ti·∫øng Vi·ªát',\n  th: '‡πÑ‡∏ó‡∏¢',\n  my: '·Äô·Äº·Äî·Ä∫·Äô·Ä¨·Äò·Ä¨·Äû·Ä¨',\n  sk: 'Slovenƒçina',\n  te: '‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å',\n  uk: '–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞',\n  bg: '–ë—ä–ª–≥–∞—Ä—Å–∫–∏',\n  cs: 'ƒåe≈°tina',\n  de: 'Deutsch',\n  nl: 'Nederlands',\n  nb: 'Norsk',\n  fa: 'ŸÅÿßÿ±ÿ≥€å',\n  ar: 'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©',\n  sr: 'srpski',\n};\n","import React from 'react';\n\nimport './Signup.css';\n\nconst REACT_COMPONENTS_FORM_ID = '1181861';\nconst OVERREACTED_FORM_ID = '812047';\n\nclass Signup extends React.Component {\n  render() {\n    let form,\n      { cta } = this.props;\n    switch (cta) {\n      case 'react':\n        form = {\n          id: REACT_COMPONENTS_FORM_ID,\n          title: 'Learn to Build Resilient React Components',\n          subTitle:\n            'Get a one week email course and learn how I think about writing React components based on 4 Principles.',\n          buttonText: 'Start Learning',\n        };\n        break;\n      default:\n        form = {\n          id: OVERREACTED_FORM_ID,\n          title: 'Subscribe to the Newsletter',\n          subTitle: 'Subscribe to get my latest content by email.',\n          buttonText: 'Subscribe',\n        };\n    }\n    return (\n      <form\n        action={`https://app.convertkit.com/forms/${form.id}/subscriptions`}\n        className=\"seva-form formkit-form\"\n        method=\"post\"\n        min-width=\"400 500 600 700 800\"\n        style={{\n          boxShadow: 'var(--form-shadow)',\n          backgroundColor: 'var(--bg)',\n          borderRadius: '6px',\n        }}\n      >\n        <div data-style=\"full\">\n          <div\n            data-element=\"column\"\n            className=\"formkit-column\"\n            style={{ backgroundColor: 'var(--bg-secondary)' }}\n          >\n            <h1\n              className=\"formkit-header\"\n              data-element=\"header\"\n              style={{\n                color: 'var(--textTitle)',\n                fontSize: '20px',\n                fontWeight: 700,\n              }}\n            >\n              {form.title}\n            </h1>\n            <div\n              data-element=\"subheader\"\n              className=\"formkit-subheader\"\n              style={{ color: 'var(--textNormal)' }}\n            >\n              <p>{form.subTitle}</p>\n            </div>\n            <div className=\"formkit-image\">\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"46\"\n                height=\"46\"\n                viewBox=\"0 0 46 46\"\n                style={{ maxWidth: '100%' }}\n              >\n                <g fill=\"none\" fillRule=\"evenodd\">\n                  <path\n                    fill=\"#DD92AB\"\n                    d=\"M23,36 C22.813,36 22.627,35.948 22.463,35.844 L0.463,21.844 C0.159,21.651 -0.017,21.308 0.001,20.948 C0.02,20.589 0.23,20.266 0.553,20.105 L23,6 L45.447,20.105 C45.769,20.266 45.98,20.588 45.999,20.948 C46.018,21.308 45.841,21.65 45.537,21.844 L23.537,35.844 C23.373,35.948 23.187,36 23,36 Z\"\n                  />\n                  <path\n                    fill=\"#FFF\"\n                    d=\"M38,37 L8,37 L8,1 C8,0.448 8.448,0 9,0 L37,0 C37.552,0 38,0.448 38,1 L38,37 Z\"\n                  />\n                  <path\n                    fill=\"#FFA7C4\"\n                    d=\"M45,46 C44.916,46 44.831,45.989 44.748,45.968 L21.748,39.968 L22,33 L46,21 L46,45 C46,45.31 45.856,45.602 45.611,45.792 C45.435,45.928 45.219,46 45,46 Z\"\n                  />\n                  <path\n                    fill=\"#FFC3D7\"\n                    d=\"M45,46 L1,46 C0.447,46 0,45.552 0,45 L0,21 L45.479,44.122 C45.88,44.341 46.083,44.804 45.969,45.247 C45.856,45.69 45.457,46 45,46 Z\"\n                  />\n                  <path\n                    fill=\"#FFA7C4\"\n                    d=\"M19 20.414L14.293 15.707C13.902 15.316 13.902 14.684 14.293 14.293L19 9.586 20.414 11 16.414 15 20.414 19 19 20.414zM27 20.414L25.586 19 29.586 15 25.586 11 27 9.586 31.707 14.293C32.098 14.684 32.098 15.316 31.707 15.707L27 20.414z\"\n                  />\n                </g>\n              </svg>\n            </div>\n          </div>\n          <div data-element=\"column\" className=\"formkit-column\">\n            <ul\n              className=\"formkit-alert formkit-alert-error\"\n              data-element=\"errors\"\n              data-group=\"alert\"\n            />\n\n            <div data-element=\"fields\" className=\"seva-fields formkit-fields\">\n              <div className=\"formkit-field\">\n                <input\n                  className=\"formkit-input\"\n                  aria-label=\"Your first name\"\n                  name=\"fields[first_name]\"\n                  placeholder=\"Your first name\"\n                  type=\"text\"\n                  style={{\n                    borderColor: 'rgb(227, 227, 227)',\n                    borderRadius: '4px',\n                    color: 'rgb(0, 0, 0)',\n                    fontWeight: 400,\n                  }}\n                  required\n                />\n              </div>\n              <div className=\"formkit-field\">\n                <input\n                  className=\"formkit-input\"\n                  name=\"email_address\"\n                  aria-label=\"Your email address\"\n                  placeholder=\"Your email address\"\n                  required\n                  type=\"email\"\n                  style={{\n                    borderColor: 'rgb(227, 227, 227)',\n                    borderRadius: '4px',\n                    color: 'rgb(0, 0, 0)',\n                    fontWeight: 400,\n                  }}\n                />\n              </div>\n              <button\n                data-element=\"submit\"\n                className=\"formkit-submit formkit-submit\"\n                style={{\n                  backgroundColor: 'hsl(340, 63%, 55%)',\n                  borderRadius: '24px',\n                  color: 'white',\n                  fontWeight: 700,\n                }}\n              >\n                <div className=\"formkit-spinner\" />\n                <span>{form.buttonText}</span>\n              </button>\n            </div>\n            <div\n              data-element=\"guarantee\"\n              className=\"formkit-guarantee\"\n              style={{\n                color: 'var(--textNormal)',\n                fontSize: '13px',\n                fontWeight: 400,\n              }}\n            >\n              <p>I won‚Äôt send you spam.</p>\n              <p>\n                Unsubscribe at <em>any</em> time.\n              </p>\n            </div>\n          </div>\n        </div>\n      </form>\n    );\n  }\n}\n\nexport default Signup;\n","// Please keep keys lowercase!\nexport default {\n  'https://reactjs.org': {\n    'pt-br': 'https://pt-br.reactjs.org',\n    // other languages...\n  },\n  // other links...\n};\n","import { supportedLanguages } from './../../i18n';\nimport whitelist from './whitelist';\n\n// This is kind of a mess for some languages.\n// Try to be as short as possible.\n// Make sure you use a real code (e.g. \"ja\", not \"jp\").\n// Some resources:\n// http://www.rfc-editor.org/rfc/bcp/bcp47.txt\n// https://www.w3.org/International/articles/language-tags/\n// https://www.iana.org/assignments/language-subtag-registry/language-subtag-registry\n// https://discuss.httparchive.org/t/what-are-the-invalid-uses-of-the-lang-attribute/1022\n\nexport const codeToLanguage = code =>\n  supportedLanguages[code].replace(/ /g, ' ' /* nbsp */);\n\nexport const loadFontsForCode = code => {\n  switch (code) {\n    case 'ru':\n    case 'bg':\n      import('../fonts/fonts-shared.cyrillic.css');\n      import('../fonts/fonts-post.cyrillic.css');\n      break;\n    case 'uk':\n      import('../fonts/fonts-shared.cyrillic.css');\n      import('../fonts/fonts-post.cyrillic.css');\n      import('../fonts/fonts-shared.latin-ext.css');\n      import('../fonts/fonts-post.latin-ext.css');\n      break;\n    case 'cs':\n    case 'da':\n    case 'de':\n    case 'es':\n    case 'fi':\n    case 'fr':\n    case 'he':\n    case 'hu':\n    case 'it':\n    case 'nl':\n    case 'no':\n    case 'pl':\n    case 'pt-br':\n    case 'sk':\n    case 'sr':\n    case 'sq':\n    case 'sv':\n    case 'tr':\n      import('../fonts/fonts-shared.latin-ext.css');\n      import('../fonts/fonts-post.latin-ext.css');\n      break;\n    case 'vi':\n      import('../fonts/fonts-shared.vietnamese.css');\n      import('../fonts/fonts-post.vietnamese.css');\n      break;\n    case 'fa':\n      import('../fonts/fonts-post.persian.css');\n      break;\n    case 'ar':\n      import('../fonts/fonts-post.arabic.css');\n      break;\n    default:\n      break;\n  }\n};\n\n// TODO: the curried signature is weird.\nexport const createLanguageLink = (slug, lang) => {\n  const rawSlug = slug.replace(`${lang}/`, '');\n\n  return targetLang =>\n    targetLang === 'en' ? rawSlug : `${targetLang}${rawSlug}`;\n};\n\nexport const replaceAnchorLinksByLanguage = (html, code) => {\n  // Match any link using https://regexr.com/4airl\n  const matches = html.match(/https?:\\/\\/(www)?[^\\/\\s)\"?]+/gm);\n\n  // Return same html if no matches were found\n  // or code isn't supported\n  if (!matches || !supportedLanguages[code]) {\n    return html;\n  }\n\n  matches.forEach(url => {\n    // Replace to locale url if and only if exists in whitelist\n    // and has code registered\n    if (whitelist[url] && whitelist[url][code]) {\n      html = html.replace(url, whitelist[url][code]);\n    }\n  });\n\n  return html;\n};\n","import React from 'react';\nimport { Link, graphql } from 'gatsby';\nimport get from 'lodash/get';\n\nimport '../fonts/fonts-post.css';\nimport Bio from '../components/Bio';\nimport Layout from '../components/Layout';\nimport SEO from '../components/SEO';\nimport Signup from '../components/Signup';\nimport Panel from '../components/Panel';\nimport TagLabels from '../components/TagLabels';\nimport { formatPostDate, formatReadingTime } from '../utils/helpers';\nimport { rhythm, scale } from '../utils/typography';\nimport {\n  codeToLanguage,\n  createLanguageLink,\n  loadFontsForCode,\n  replaceAnchorLinksByLanguage,\n} from '../utils/i18n';\n\nconst GITHUB_USERNAME = 'princiya';\nconst GITHUB_REPO_NAME = 'blog';\nconst systemFont = `system-ui, -apple-system, BlinkMacSystemFont, \"Segoe UI\",\n    \"Roboto\", \"Oxygen\", \"Ubuntu\", \"Cantarell\", \"Fira Sans\",\n    \"Droid Sans\", \"Helvetica Neue\", sans-serif`;\n\nclass Translations extends React.Component {\n  render() {\n    let { translations, lang, languageLink, editUrl } = this.props;\n\n    let readerTranslations = translations.filter(lang => lang !== 'ru');\n    let hasRussianTranslation = translations.indexOf('ru') !== -1;\n\n    return (\n      <div className=\"translations\">\n        <Panel style={{ fontFamily: systemFont }}>\n          {translations.length > 0 && (\n            <span>\n              {hasRussianTranslation && (\n                <span>\n                  Originally written in:{' '}\n                  {'en' === lang ? (\n                    <b>{codeToLanguage('en')}</b>\n                  ) : (\n                    <Link to={languageLink('en')}>English</Link>\n                  )}\n                  {' ‚Ä¢ '}\n                  {'ru' === lang ? (\n                    <b>–†—É—Å—Å–∫–∏–π (–∞–≤—Ç–æ—Ä—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥)</b>\n                  ) : (\n                    <Link to={languageLink('ru')}>\n                      –†—É—Å—Å–∫–∏–π (–∞–≤—Ç–æ—Ä—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥)\n                    </Link>\n                  )}\n                  <br />\n                  <br />\n                </span>\n              )}\n              <span>Translated by readers into: </span>\n              {readerTranslations.map((l, i) => (\n                <React.Fragment key={l}>\n                  {l === lang ? (\n                    <b>{codeToLanguage(l)}</b>\n                  ) : (\n                    <Link to={languageLink(l)}>{codeToLanguage(l)}</Link>\n                  )}\n                  {i === readerTranslations.length - 1 ? '' : ' ‚Ä¢ '}\n                </React.Fragment>\n              ))}\n            </span>\n          )}\n          {lang !== 'en' && (\n            <>\n              <br />\n              <br />\n              {lang !== 'ru' && (\n                <>\n                  <Link to={languageLink('en')}>Read the original</Link>\n                  {' ‚Ä¢ '}\n                  <a href={editUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n                    Improve this translation\n                  </a>\n                  {' ‚Ä¢ '}\n                </>\n              )}\n              <Link to={`/${lang}`}>View all translated posts</Link>{' '}\n            </>\n          )}\n        </Panel>\n      </div>\n    );\n  }\n}\n\nclass BlogPostTemplate extends React.Component {\n  render() {\n    const post = this.props.data.markdownRemark;\n    const siteTitle = get(this.props, 'data.site.siteMetadata.title');\n    let {\n      previous,\n      next,\n      slug,\n      translations,\n      translatedLinks,\n    } = this.props.pageContext;\n    const lang = post.fields.langKey;\n\n    // Replace original links with translated when available.\n    let html = post.html;\n\n    // Replace original anchor links by lang when available in whitelist\n    // see utils/whitelist.js\n    html = replaceAnchorLinksByLanguage(html, lang);\n\n    translatedLinks.forEach(link => {\n      // jeez\n      function escapeRegExp(str) {\n        return str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n      }\n      let translatedLink = '/' + lang + link;\n      html = html.replace(\n        new RegExp('\"' + escapeRegExp(link) + '\"', 'g'),\n        '\"' + translatedLink + '\"'\n      );\n    });\n\n    translations = translations.slice();\n    translations.sort((a, b) => {\n      return codeToLanguage(a) < codeToLanguage(b) ? -1 : 1;\n    });\n\n    loadFontsForCode(lang);\n    // TODO: this curried function is annoying\n    const languageLink = createLanguageLink(slug, lang);\n    const enSlug = languageLink('en');\n    const editUrl = `https://github.com/${GITHUB_USERNAME}/${GITHUB_REPO_NAME}/edit/master/src/pages/${enSlug.slice(\n      1,\n      enSlug.length - 1\n    )}/index${lang === 'en' ? '' : '.' + lang}.md`;\n    const discussUrl = `https://twitter.com/search?q=${encodeURIComponent(\n      `https://princiya.com/blog${enSlug}`\n    )}`;\n\n    return (\n      <Layout location={this.props.location} title={siteTitle} maxWidth={true}>\n        <SEO\n          lang={lang}\n          title={post.frontmatter.title}\n          description={post.frontmatter.spoiler}\n          slug={post.fields.slug}\n        />\n        <main>\n          <article>\n            <header>\n              <h1 style={{ color: 'var(--textTitle)' }}>\n                {post.frontmatter.title}\n              </h1>\n              <p\n                style={{\n                  ...scale(-1 / 5),\n                  display: 'block',\n                  marginBottom: rhythm(1),\n                  marginTop: rhythm(-4 / 5),\n                }}\n              >\n                {formatPostDate(post.frontmatter.date, lang)}\n                {` ‚Ä¢ ${formatReadingTime(post.timeToRead)}`}\n              </p>\n              {translations.length > 0 && (\n                <Translations\n                  translations={translations}\n                  editUrl={editUrl}\n                  languageLink={languageLink}\n                  lang={lang}\n                />\n              )}\n              <TagLabels tags={post.frontmatter.tags || []} />\n            </header>\n            <div dangerouslySetInnerHTML={{ __html: html }} />\n          </article>\n        </main>\n        <aside>\n          <div\n            style={{\n              margin: '90px 0 40px 0',\n              fontFamily: systemFont,\n            }}\n          >\n            {/* <Signup cta={post.frontmatter.cta} /> */}\n          </div>\n          <nav>\n            <ul\n              style={{\n                display: 'flex',\n                flexWrap: 'wrap',\n                justifyContent: 'space-between',\n                listStyle: 'none',\n                padding: 0,\n              }}\n            >\n              <li>\n                {previous && (\n                  <Link\n                    to={previous.fields.slug}\n                    rel=\"prev\"\n                    style={{ marginRight: 20 }}\n                  >\n                    ‚Üê {previous.frontmatter.title}\n                  </Link>\n                )}\n              </li>\n              <li>\n                {next && (\n                  <Link to={next.fields.slug} rel=\"next\">\n                    {next.frontmatter.title} ‚Üí\n                  </Link>\n                )}\n              </li>\n            </ul>\n          </nav>\n        </aside>\n      </Layout>\n    );\n  }\n}\n\nexport default BlogPostTemplate;\n\nexport const pageQuery = graphql`\n  query BlogPostBySlug($slug: String!) {\n    site {\n      siteMetadata {\n        title\n        author\n      }\n    }\n    markdownRemark(fields: { slug: { eq: $slug } }) {\n      id\n      html\n      timeToRead\n      frontmatter {\n        title\n        tags\n        date(formatString: \"MMMM DD, YYYY\")\n        spoiler\n        cta\n      }\n      fields {\n        slug\n        langKey\n      }\n    }\n  }\n`;\n"],"sourceRoot":""}